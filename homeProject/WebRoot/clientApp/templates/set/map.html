<ion-view view-title="外勤签到">
    <ion-nav-buttons>
        <button class="button button-clear icon ion-ios-arrow-back" ng-click="goback()"></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
        <button class="button button-clear icon ion-android-refresh" ng-click="[getPosition(),getSignInCount()]"></button>
    </ion-nav-buttons>
    <ion-content>
        <div data-ng-init="getPosition()"></div>
        <div data-ng-init="getSignInCount()"></div>
       <!--<ion-item class="item-input item-button-right">-->
           <!--<input type="text" placeholder="请输入查找的地名" id="keyword" />-->
           <!--<button class="button button-stable" ng-click="search()">搜索</button>-->
       <!--</ion-item>-->
        <ion-item class="item-input">
            <input type="text" placeholder="请选择楼盘" ng-click="openModal()" ng-model="data.house">
        </ion-item>
        <ion-item>
        <div id="map" style="width: 100px;height: 80px;border: 0px solid gray;float: left"></div>
           <span id="title"></span><br/>
            <span id="address"></span><br/><br/>
            <a ui-sref="map-adjust">地点微调</a>
        </ion-item>
        <!--<div style="width:600px;height:500px;border:0px solid gray" id="map"></div>-->
        <!--<p id="aa"></p>-->
        <div style="display: none">
        <span id="lontitude"></span>
        <span id="latitude"></span></div>
        <button class="button button-block button-positive" ng-click="sign()">签到</button>
        <span>今日已签到:{{count}}次</span><a ui-sref="sign-statistics"> 签到统计</a>
    </ion-content>
    <script id="my-modal.html" type="text/ng-template" >
        <div class="modal" style="width: 100%;height: 100%">
            <ion-header-bar class="bar-positive">
                <button class="button button-icon icon ion-ios-arrow-back" ng-click="closeModal()"></button>
                <h1 class="title">楼盘</h1>
            </ion-header-bar>
            <ion-content>
                <ion-item class="item-input" style="padding-top: 0px;padding-bottom: 0px">
                    <input type="text" placeholder="搜索楼盘" ng-model="data.searchName">
                    <button class="button button-icon icon ion-ios-search" ng-click="searchHouse(data.searchName)"></button>
                </ion-item>
                <div class="list">
                    <label class="item item-radio" ng-repeat="item in houses" ng-click="closeModal(item.address,item.code)">
                        <input type="radio" name="house">
                        <div class="item-content">
                        <span>{{item.address}}</span>
                        </div>
                        <i class="radio-icon  ion-checkmark positive"></i>
                    </label>
                </div>
            </ion-content>
        </div>
    </script>
</ion-view>
